# 開発ワークフロー改善ガイドライン

このドキュメントは、開発作業を効率的かつ効果的に進めるためのガイドラインをまとめたものです。特に、作業範囲の管理とコミット戦略に焦点を当てています。

## 1. 指示範囲の明確化と遵守

### 問題点
- 指示された範囲を超えて作業を進めてしまう（スコープクリープ）
- 明示的な承認なしに追加機能を実装してしまう

### 改善策
- **作業開始前の確認**：タスクの範囲と目標を明確に理解し、必要に応じて質問する
- **段階的な承認**：指示された範囲を完了したら、次のステップに進む前にユーザーの承認を得る
- **提案ベースの拡張**：追加作業が有益と判断した場合は、実装ではなく提案として提示する
- **明示的な境界設定**：「このタスクには含まれないもの」を明確にする

### 実践方法
```
# 良い例
「開発環境のセットアップが完了しました。次のステップとして、基本コンポーネントの実装を行いますか？」

# 悪い例
「開発環境のセットアップが完了したので、続けて基本コンポーネントも実装しました」
```

## 2. 論理的な単位でのコミット戦略

### 問題点
- 大きな変更を一度にコミットしてしまう
- 関連性の低い変更を同じコミットに含めてしまう
- コミット履歴から作業の流れが追跡しにくくなる

### 改善策
- **アトミックコミット**：1つの論理的な変更に対して1つのコミットを作成する
- **段階的なコミット**：大きな機能は複数の小さなコミットに分割する
- **明確なコミットメッセージ**：何が、なぜ変更されたのかを簡潔に説明する
- **コミットの事前確認**：コミット前に変更内容を確認し、不要な変更や一時ファイルを除外する

### コミット単位の例
1. **プロジェクト初期化**：基本設定ファイルの作成
2. **依存関係の追加**：必要なパッケージのインストール
3. **設定ファイルの更新**：特定の機能のための設定変更
4. **コンポーネント単位**：各UIコンポーネントの追加や修正
5. **機能単位**：特定の機能（認証、データ取得など）の実装
6. **バグ修正**：特定の問題の解決
7. **リファクタリング**：コードの改善（機能変更なし）
8. **ドキュメント更新**：コメントやREADMEの更新

### 実践方法
```bash
# 良い例
git add package.json package-lock.json
git commit -m "chore: プロジェクト依存関係の追加"

git add tailwind.config.js
git commit -m "config: Tailwind CSSの設定"

git add src/components/Button.tsx
git commit -m "feat: ボタンコンポーネントの実装"

# 悪い例
git add .
git commit -m "いろいろ実装"
```

## 3. 進捗報告と承認フロー

### 問題点
- 長時間作業後に一度に大量の変更を報告する
- ユーザーが途中経過を確認できない
- 方向性の誤りが後になって発覚する

### 改善策
- **マイルストーン報告**：主要な機能や段階が完了したら報告する
- **定期的な状況共有**：長時間の作業中も定期的に進捗を共有する
- **決定ポイントの明確化**：ユーザーの判断が必要な箇所を特定し、明示的に質問する
- **視覚的な確認**：可能な場合はスクリーンショットや図を使って進捗を示す

### 実践方法
```
# 良い例
「環境構築の第一段階（Next.jsプロジェクトの作成とTailwind CSSの設定）が完了しました。
以下が現在の状態です：
- package.jsonに必要な依存関係を追加しました
- tailwind.config.jsを設定しました
次のステップとして、Biomeの設定を行ってよろしいですか？」

# 悪い例
「すべての環境構築が完了しました。何か質問はありますか？」
```

## 4. 作業の文書化

### 問題点
- 実装の意図や決定理由が不明確
- 後から作業内容を振り返りにくい
- 他の開発者が変更の背景を理解しにくい

### 改善策
- **コミットメッセージの充実**：変更内容だけでなく、なぜその変更を行ったかも記録する
- **重要な決定の文書化**：技術選定や設計判断の理由をコメントやドキュメントに残す
- **メモリバンクの更新**：作業完了後にメモリバンクを更新し、現在の状態を反映させる
- **TODO/FIXMEコメント**：将来的な改善点や注意点をコード内にマークする

### 実践方法
```
# 良いコミットメッセージの例
feat: 日本語タグ対応の正規表現を修正

英数字のみ対応だった正規表現(/#(\w+)/g)を、
日本語を含む多言語対応(/#([^\s#]+)/g)に変更。
これにより、日本語のタグも正しく認識されるようになる。
```

## まとめ

効果的な開発ワークフローは、以下の原則に基づいています：

1. **明確な境界設定**：作業範囲を理解し、遵守する
2. **段階的な実装**：大きなタスクを小さな単位に分割する
3. **頻繁なコミュニケーション**：進捗を共有し、方向性を確認する
4. **論理的なコミット**：変更を意味のある単位でコミットする
5. **透明性の確保**：決定理由や実装意図を文書化する

これらの原則を守ることで、効率的で追跡可能な開発プロセスを実現し、品質の高いソフトウェアを提供することができます。
